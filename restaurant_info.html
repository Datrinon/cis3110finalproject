<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/main.css">
    <title>The Dubai Mall - Restaurant Info.</title>
</head>
<body>
<nav class="navbar sticky-top navbar-light bg-light navbar-expand-lg">
    <div class="container">
        <span><img class="navbar-brand" src="images/emaar.png"></span>
        <a class="navbar-brand" href="#">THE DUBAI MALL <span style="font-size:0.5em"> دبي مول</span></a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav-toggler" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="nav-toggler">
            <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="shops.html">Shops</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="aquarium.html">Aquarium</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="burj-khalifa.html">Burj Khalifa</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="restaurants.html">Restaurants</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact Us</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container mt-5 full-body">
    <div class="container mt-5 full-body">
        <div class="row row-cols-1 row-cols-lg-2" id="shopContainer">
        </div>
    </div>
</div>

<div class="container-fluid footer p-0 m-0 pt-5 pb-5">
    <p class="text-center text-white">© 2020 Dubai Malls. All rights reserved.</p>
</div>

</body>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script type="text/javascript">
    var shops_name = [
        ["Black Tap","Charleys Philly Steaks"],
        ["Angelina","Cafe Bateel"],
        ["Cereal Killer Cafe","Joe's Cafe"],
        ["New Shanghai","P.F Changs"],
        ["Burger King","KFC"],
        ["Creptastic","Paul Cafe"]
    ];
    var shops_img = [
        ["black-tap.jpg","charleys-philly-steaks.png"],
        ["angelina.jpg","cafe-bateel.jpg"],
        ["cereal-killer-cafe.jpg","joes-cafe.jpg"],
        ["new-shanghai.jpg","pf-changs.jpg"],
        ["burger-king.jpg","kfc.jpg"],
        ["creptastic.jpg","paul.jpg"]
    ];
    var shops_logo = [
        ["black-tap.png","charleys-philly-steaks.png"],
        ["angelina.png","cafe-bateel.png"],
        ["cereal-killer-cafe.jpg","joes-cafe.png"],
        ["new-shanghai.png","pf-changs.png"],
        ["burger-king.png","kfc.png"],
        ["creptastic.png","paul.png"]
    ];
    var shops_desc = [
        [
            "For those with pure food indulgence in mind, Black Tap have the burgers to make your friends jealous, instagram it, eat it and talk about it. Extravagant milkshakes that are part dessert, part art project. Nostalgia taken to the next level for the Instagram age.",
            "Try the Philly cheesesteak concept from Columbus, Ohio, at Charley's Grilled Subs. Enjoy freshly prepared sandwiches and salads in an entertaining atmosphere."
        ],
        [
            "Much more than a simple patisserie or tearoom, Angelina is a luxury brand with a prestigious image that symbolises the “French Way of Life”. Angelina serves breakfast, brunch, lunch and dinner.",
            "Offering an innovative range of gourmet food and beverage, Café Bateel combines ancient Umbrian culinary heritage – famous for its natural and healthy cuisine – with traditional Arabic hospitality."
        ],
        [
            "A colourful, nostalgic eatery with more than 120 cereals, plus a selection of milk and toppings. Grilled cheese sandwiches, coffee, tea, fresh juices, cornflakes chicken, pop tarts, cereal ice cream, maltshakes, stacked hot chocolate, toasties and more. Now open on the Ground Floor near the Waterfall.",
            "Joe's Café remains at the forefront of culinary trends with its brunch, lunch and afternoon tea offerings. This, along with a delightful and friendly service, ensures an unforgettable lunchtime experience."
        ],
        [
            "New Shanghai offers guests a taste of modern Shanghai-style cuisine, in an ambient setting inspired by the bustling, colourful streets of the city it's named after. Enjoy Shanghai-style soup dumplings, noodles, bubbling hot pots, and pan-fried buns. Open now on the Lower Ground, near The Waterfall.",
            "P. F. Chang’s was founded in Scottsdale, Arizona in 1993 by Paul Fleming. The restaurant serves an American Chinese cuisine from a menu originally conceived and planned by Chef Philip Chiang."
        ],
        [
            "Burger King serves their famous fire-grilled Whopper and King Fries, alongside a wide variety of beef, chicken, fish and bean sandwiches. For the health conscious, there are lighter options too.",
            "KFC's signature crisp, mouth watering fried chicken is the best-loved item on the menu. All our food is made with high quality ingredients, innovative recipes, and time-tested cooking methods."
        ],
        [
            "Creptastic is a modern crepe concept with an urban-metropolitan theme, born with a vision to offer a true 'urban food' experience with the quality and consistency of a world-class eatery.",
            "Paul offers exquisite French breads and pastries, tempting cakes and desserts as well as savoury meals such as salads, sandwiches or light main courses."
        ]
    ];

    var path ="./images/restaurant/pics/";
    var logo_path = "./images/restaurant/logo/";

    var ck = [];

    function breakUpURLParameters(url) {        //analyze and output the url parameters as a useful array to caller
            //  create a link in the DOM and set its href
            var link = document.createElement('a');
            link.setAttribute('href', url);

            return {
                host:     link.hostname,  //  'example.com'
                port:     link.port,      //  12345
                search:   mapMaker(link.search),  //  {startIndex: 1, pageSize: 10}
                path:     link.pathname,  //  '/blog/foo/bar'
                protocol: link.protocol   //  'http:'
            }
        }

        function mapMaker(search, preserveDuplicates) { //responsible for obtaining all url params, representing them into an array
            //  option to preserve duplicate keys (e.g. 'sort=name&sort=age')
            preserveDuplicates = preserveDuplicates || false;  //  disabled by default

            var outputNoDupes = {};
            var returnableArray = [];  //  optional output array to preserve duplicate keys

            //  sanity check
            if(!search) throw new Error('mapMaker: your search input param is misformed?');

            //  remove ? character from your url (?foo=1&bar=2 -> 'foo=1&bar=2')
            search = search.split('?')[1];

            //  split apart your keys into a useful array of key/value pairs ('foo=1&bar=2' -> ['foo=1', 'bar=2'])
            search = search.split('&');

            //  separate keys from values (['foo=1', 'bar=2'] -> [{foo:1}, {bar:2}])
            //  then package as an array for your caller to use as variables
            returnableArray = search.map(function(keyval){
                var out = {};
                keyval = keyval.split('=');
                out[keyval[0]] = keyval[1];
                outputNoDupes[keyval[0]] = keyval[1]; //  might as well do the no-dupe work too while we're in the loop
                return out;
            });
            return (preserveDuplicates) ? returnableArray : outputNoDupes;
        }

    $(document).ready(function(){
        let content = '';
        var url = window.location.href;
        var info = breakUpURLParameters(url);
        let cuisine_id = decodeURIComponent(info.search.c);

        for(let i = 0; i<shops_name[cuisine_id].length; ++i) {
            content+=`<div class="col">

                            <div class="card shadow p-3 mb-5 bg-white rounded">
                                <a href="./restaurant_desc.html?r=${i}&c=${cuisine_id}">
                                    <img class="card-img-top img-fluid" src="${logo_path}${shops_logo[cuisine_id][i]}">
                                </a>
                                <div class="card-body">
                                    <p class="card-text text-center">
                                        ${shops_name[cuisine_id][i]}
                                    </p>
                                </div>
                            </div>
                       </div>`;
        }
        $('#shopContainer').html(content);
    });

    
</script>
</html>